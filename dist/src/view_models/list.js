define(["list_manager","knockout","i18n!nls/ui_strings","task_manager","renderer","view_models/task","text!views/task.html","smokesignals"],function(e,t,n,r,i,s,o,u){function a(){this.placeholderText=n.createTaskPlaceholderText,this.addText=n.addText,this.saveText=n.saveText,this.listName=t.observable(""),this.enableAdd=t.observable(!1),this.taskName=t.observable(""),this.isButtonEnabled=t.computed(function(){this.taskName()!==""?this.enableAdd(!0):this.enableAdd(!1)},this),this.addTask=function(){var e=r.createTask(this.taskName()),t=document.querySelector(".todo_app ul"),n=new s;return this.list.tasks.push(e),n.id="task-"+(this.list.tasks.length-1),n.name(e.name),n.completed(!1),i.render(t,o,n,!0),u.convert(n),n.on("taskremoved",this.removeTaskHandler),n.on("taskcompleted",this.completeTaskHandler),this.taskName(""),n},this.addTaskHandler=this.addTask.bind(this),this.removeTask=function(e){this.list.tasks.splice(e,1)},this.removeTaskHandler=this.removeTask.bind(this),this.completeTask=function(e){var t=e.id.split("-")[1];this.lists.tasks[t].completed=!this.list.tasks[t].completed},this.completeTaskHandler=this.completeTask.bind(this),this.saveList=function(){e.saveList(this.list)},this.saveListHandler=this.saveList.bind(this)}return a});